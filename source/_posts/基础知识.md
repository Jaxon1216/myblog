---
title: C++基础知识
date: 2025-08-04 22:29:24
categories:
  - study
tags:
  - C++

---

## 目录
1. [C++基础概念](#c基础概念)
2. [面向对象编程](#面向对象编程)
3. [理论知识点](#理论知识点)

---

## C++基础概念

### 结构体

**结构体定义和使用：**
结构体是一种自定义的数据类型，可以包含多个不同类型的成员变量。

**结构体的定义格式：**
```cpp
struct 结构体名
{
    成员变量类型1 成员变量名1;
    成员变量类型2 成员变量名2;
    ...
    成员变量类型n 成员变量名n;
};
```

**基础示例：**
```cpp
#include <iostream>
#include <string>
using namespace std;

struct Student
{
    int id;         //学号
    string name;    //姓名
    int age;        //年龄
};

int main()
{
    Student stu;    //在c++中可以省略struct关键字
    stu.id = 1001;
    stu.name = "张三";
    stu.age = 18;
    
    cout << "学号：" << stu.id << endl;
    cout << "姓名：" << stu.name << endl;
    cout << "年龄：" << stu.age << endl;
    return 0;
}
```

**结构体数组：**
```cpp
Student stu[3] = {
    {1001, "张三", 18},
    {1002, "李四", 19},
    {1003, "王五", 20}
};
```

**结构体指针：**
```cpp
Student stu = {1001, "张三", 18};
Student *p = &stu;  //定义结构体指针p，指向结构体变量stu
cout << "学号：" << p->id << endl;  //通过指针访问结构体成员变量
```

### 指针

**指针定义和使用：**
```cpp
int a = 10, b = 20;
int *p1 = &a, *p2 = &b;         // 定义指针变量p1和p2，分别指向a和b
cout << "*p1 = " << *p1 << endl; //指针变量前加*，表示取出指针变量指向的内存中的值
cout << "p1 = " << p1 << endl;   //指针变量前不加*，表示取出指针变量本身的值，即内存编号
```

**空指针和野指针：**
```cpp
int *p = NULL;                  //定义空指针
//cout << "*p = " << *p << endl;  //空指针不能访问内存中的值，会报错

int *p = (int *)0x7ffebc1b3b7c; //定义野指针
//cout << "*p = " << *p << endl;  //野指针不能访问内存中的值，会报错
```

**const修饰指针：**
```cpp
const int *p = &a;              //指向常量的指针，不能修改指向的值
int *const p = &a;              //指针常量，不能修改指针指向的地址
```

### 函数

**函数声明和定义：**
```cpp
int max (int a, int b);             // 函数声明
int max (int a, int b) {            // 函数定义
    return a > b ? a : b;           // 三目运算符
}
```

**值传递vs引用传递：**
```cpp
// 值传递（不会改变原值）
void swap(int a, int b) {
    int temp = a;
    a = b;
    b = temp;
}

// 引用传递（会改变原值）
void swap(int &a, int &b) {
    int temp = a;
    a = b;
    b = temp;
}
```

### 数组

**一维数组：**
```cpp
int arr[10] = {1,2,3,4,5,6,7,8,9,10};

// 找出最大值
int max = arr[0];
for(int i = 0; i < 10; i++){
    if(arr[i] > max){
        max = arr[i];
    }
}

// 元素逆置
int start = 0;
int end = sizeof(arr)/sizeof(arr[0]) - 1;
while(start < end){
    int temp = arr[start];
    arr[start] = arr[end];
    arr[end] = temp;
    start++;
    end--;
}

// 冒泡排序
for(int i = 0; i < 10; i++){
    for(int j = 0; j < 10 - i - 1; j++){
        if(arr[j] > arr[j+1]){
            int temp = arr[j];
            arr[j] = arr[j+1];
            arr[j+1] = temp;
        }
    }
}
```

**二维数组：**
```cpp
// 四种定义方式
int arr1[2][3];                                    // 1. 数据类型 数组名[行数][列数];
int arr2[2][3] = {{1,2,3},{4,5,6}};               // 2. 数据类型 数组名[行数][列数] = {{数据1，数据2},{数据3，数据4}};
int arr3[2][3] = {1,2,3,4,5,6};                   // 3. 数据类型 数组名[行数][列数] = {数据1，数据2，数据3，数据4};
int arr4[][3] = {1,2,3,4,5,6};                    // 4. 数据类型 数组名[][列数] = {数据1，数据2，数据3，数据4};

// 输出二维数组
for (int i = 0; i < 2; i++){
    for (int j = 0; j < 3; j++){
        cout << arr[i][j] << " ";
    }
    cout << endl;
}
```

---

## 面向对象编程

### 类和对象

**创建类：**
```cpp
class MyClass {
    public:           // 访问修饰符指定可以从类外部访问类的成员
    int myNum;        // 属性（int 变量）
    string myString;  // 属性（string 变量）
};
```

**创建对象：**
```cpp
class Car {
  public:
    string brand;   
    string model;
    int year;
};

int main() {
  Car carObj1;
  carObj1.brand = "BMW";
  carObj1.model = "X5";
  carObj1.year = 1999;
  
  cout << carObj1.brand << " " << carObj1.model << " " << carObj1.year << "\n";
  return 0;
}
```

### 类方法

**内部定义：**
```cpp
class MyClass {
  public:
    void myMethod() {
      cout << "Hello World!";
    }
};

int main() {
  MyClass myObj;
  myObj.myMethod();
  return 0;
}
```

**外部定义：**
```cpp
class MyClass {
  public:
    void myMethod();   // 方法声明
};

// 类外的方法定义
void MyClass::myMethod() {
  cout << "Hello World!";
}
```

### 构造函数

**内部定义：**
```cpp
class Car {
  public:
    string brand;
    string model;
    int year;
    Car(string x, string y, int z) { // 带参数的构造函数
      brand = x;
      model = y;
      year = z;
    }
};

int main() {
  Car carObj1("BMW", "X5", 1999);
  return 0;
}
```

**外部定义：**
```cpp
class Car {
  public:
    string brand;
    string model;
    int year;
    Car(string x, string y, int z); // 构造函数声明
};

// 类外的构造函数定义
Car::Car(string x, string y, int z) {
  brand = x;
  model = y;
  year = z;
}
```

### 访问修饰符

在C++中，有三个访问修饰符：
- **public** - 成员可以从类外访问
- **private** - 不能从类外部访问（或查看）成员
- **protected** - 不能从类外部访问成员，但是可以在继承的类中访问成员

默认情况下，如果不指定访问修饰符，则类的所有成员都是私有的private。

```cpp
class MyClass {
  public:    // 公共访问修饰符
    int x;   // 公共属性
  private:   // 私有访问修饰符
    int y;   // 私有属性
};

int main() {
  MyClass myObj;
  myObj.x = 25;  // 允许 (public)
  // myObj.y = 50;  // 不允许 (private)
  return 0;
}
```

### 封装

封装的意义是确保对用户隐藏敏感数据。为此，必须将类变量/属性声明为private。

```cpp
class Employee {
  private:
    int salary;  // 私有属性

  public:
    // Setter
    void setSalary(int s) {
      salary = s;
    }
    // Getter
    int getSalary() {
      return salary;
    }
};

int main() {
  Employee myObj;
  myObj.setSalary(50000);
  cout << myObj.getSalary();
  return 0;
}
```

### 继承

继承对代码的可重用性很有用：在创建新类时重用现有类的属性和方法。

```cpp
// 基类
class Vehicle {
  public:
    string brand = "Ford";
    void honk() {
      cout << "Tuut, tuut! \n";
    }
};

// 派生类
class Car: public Vehicle {
  public:
    string model = "Mustang";
};

int main() {
  Car myCar;
  myCar.honk();
  cout << myCar.brand + " " + myCar.model;
  return 0;
}
```

### 多态

多态允许我们执行一个动作，以不同的方式。

```cpp
// 基类
class Animal {
  public:
    void animalSound() {
      cout << "The animal makes a sound \n";
    }
};

// 派生类
class Pig : public Animal {
  public:
    void animalSound() {
      cout << "The pig says: wee wee \n";
    }
};

// 派生类
class Dog : public Animal {
  public:
    void animalSound() {
      cout << "The dog says: bow wow \n";
    }
};

int main() {
  Animal myAnimal;
  Pig myPig;
  Dog myDog;

  myAnimal.animalSound();
  myPig.animalSound();
  myDog.animalSound();
  return 0;
}
```

---

## 理论知识点

### 类和对象相关

1. **类成员访问权限**：默认情况下，类中的数据成员是private的
2. **类定义包含**：数据和函数成员的定义
3. **对象成员函数调用**：使用点语法，如 `x.a()`
4. **对象生命周期**：对象生命期结束时，系统自动调用析构函数并销毁对象

### 函数相关

1. **形参**：形参可以有也可以没有，不是必须的
2. **函数重载**：编译器会根据函数的参数个数和参数类型来区分函数的重载形式
3. **内联函数**：inline是编译优化建议，与定义位置无关
4. **函数声明**：仅当函数定义在调用之后时需要声明

### 字符串处理

1. **字符串比较**：使用 `strcmp(s1,s2)>0` 判断字符串s1是否大于字符串s2
2. **字符函数**：
   - `isdigit()` - 检查数字字符（0-9）
   - `isalnum()` - 检查字母或数字字符
   - `islower()` - 检查小写字母（a-z）
   - `isupper()` - 检查大写字母（A-Z）
   - `isspace()` - 检查空白字符
   - `ispunct()` - 检查标点符号
   - `isprint()` - 检查可打印字符

### 控制结构

1. **break语句**：最常用的是在循环语句中的if语句里，满足条件时跳出循环
2. **continue语句**：跳过本次循环，继续下一次循环
3. **循环嵌套**：外层循环控制轮数，内层循环控制每轮次数

### 数据类型和转换

1. **类型转换**：注意隐式转换和显式转换的区别
2. **精度问题**：浮点数运算可能存在精度误差
3. **内存管理**：指针使用需要注意内存泄漏和野指针问题

---

## 常用函数和技巧

### 数学函数
```cpp
#include <cmath>
ceil(2.4)    // 向上取整，得到3
floor(2.7)   // 向下取整，得到2
abs(-5)      // 绝对值，得到5
pow(2, 3)    // 幂运算，2的3次方，得到8
sqrt(16)     // 平方根，得到4
```

### 字符串处理
```cpp
#include <string>
#include <algorithm>

string s = "hello";
reverse(s.begin(), s.end());  // 反转字符串
s.length()  // 字符串长度
s.substr(0, 3)  // 子串，从位置0开始，长度为3
```

### 字符处理
```cpp
#include <cctype>

char c = 'a';
toupper(c)   // 转换为大写
tolower(c)   // 转换为小写
isdigit(c)   // 判断是否为数字
isalpha(c)   // 判断是否为字母
```

### 输入输出格式控制
```cpp
#include <iomanip>

cout << fixed << setprecision(3) << 3.14159;  // 输出3.142
cout << setw(10) << "hello";  // 设置输出宽度为10
``` 